<!-- module html  -->
{% set tab1_data = module.tab_1 %}
{% set tab2_data = module.tab_2 %}
{% set tab3_data = module.tab_3 %}
{% set tab4_data = module.tab_4 %}



<div class=".body-container_schedules">
    <div class="container">
        <div class="header">
            <h1>24 Hour Rosary Schedule</h1>
            <p>20th Oct 2024 <span class="live">LIVE</span></p>
        </div>
        <div class="image-container">
            <!-- <img src="image_path.jpg" alt="Rosary Image"> -->
            <button class="calendar-button">
                <svg width="23" height="25" viewBox="0 0 23 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.00143608 12.6893C0.00143608 10.8302 0.00143608 8.97127 0.00143608 7.11219C0.00143608 6.51971 -0.00226451 5.92723 0.00221515 5.33475C0.0109797 4.175 0.42194 3.17875 1.24386 2.36377C1.97911 1.63475 2.8729 1.24386 3.90517 1.17628C3.97763 1.17159 3.99964 1.14854 3.99847 1.07782C3.99632 0.941277 3.99594 0.804146 4.00684 0.668187C4.03859 0.27789 4.36483 -0.00360043 4.7715 0.0018692C5.14565 0.00694813 5.46604 0.31481 5.48552 0.6928C5.49214 0.822704 5.49156 0.953193 5.48922 1.08329C5.48805 1.14502 5.50656 1.17002 5.5718 1.17002C6.22428 1.16827 6.87675 1.16846 7.52922 1.16983C7.59213 1.16983 7.61492 1.14912 7.61297 1.08486C7.60908 0.961202 7.6083 0.837355 7.61414 0.713897C7.63167 0.342158 7.91292 0.0401566 8.27032 0.00440867C8.65537 -0.0340741 8.98882 0.197213 9.07977 0.571101C9.11873 0.731087 9.09769 0.895372 9.09691 1.0577C9.09652 1.13877 9.11269 1.17159 9.20325 1.171C9.84268 1.16709 10.4823 1.16729 11.1217 1.171C11.2109 1.17159 11.2337 1.14131 11.2288 1.05829C11.2228 0.95124 11.2255 0.84341 11.2279 0.735971C11.2368 0.30934 11.5596 -0.00203768 11.9877 0.0018692C12.3945 0.00558073 12.7106 0.333172 12.712 0.75238C12.7124 0.856498 12.7184 0.961203 12.7102 1.06473C12.703 1.15772 12.7441 1.17061 12.8238 1.17022C13.3756 1.16749 13.9275 1.16866 14.4793 1.16866C14.5734 1.16866 14.6677 1.16592 14.7617 1.16963C14.8215 1.17198 14.8385 1.14912 14.8393 1.09032C14.8416 0.93112 14.8231 0.771328 14.8521 0.612905C14.9238 0.223389 15.2543 -0.027237 15.6561 0.00284592C16.0227 0.0303894 16.3183 0.348604 16.3279 0.728743C16.331 0.849075 16.3308 0.969798 16.3275 1.09013C16.3259 1.14951 16.3466 1.16963 16.4058 1.16944C17.0616 1.16807 17.7172 1.16788 18.3729 1.16944C18.4321 1.16944 18.4526 1.14951 18.4522 1.09052C18.4512 0.947333 18.446 0.803365 18.4592 0.66135C18.4964 0.262653 18.8338 -0.0153211 19.2486 0.00206454C19.622 0.017692 19.9344 0.34587 19.9385 0.728743C19.9402 0.894786 19.941 1.06083 19.9377 1.22687C19.9365 1.28821 19.9539 1.31692 20.0166 1.33665C21.3159 1.74375 22.2192 2.58431 22.7268 3.84916C22.918 4.32561 22.9989 4.82608 22.9989 5.33847C22.9998 10.2383 23.0008 15.1381 22.9989 20.0381C22.9981 22.0579 21.6252 23.7463 19.6621 24.1532C19.3814 24.2114 19.0969 24.2372 18.8114 24.2374C13.9357 24.2391 9.0601 24.2397 4.18428 24.2382C2.26912 24.2376 0.635406 22.9798 0.135631 21.126C0.0462327 20.7945 0.00182562 20.4553 0.00182562 20.1121C0.000462241 17.6377 0.00104654 15.1635 0.00104654 12.6891L0.00143608 12.6893ZM11.5066 7.51792C8.21208 7.51792 4.91777 7.51792 1.62327 7.51792C1.53459 7.51792 1.49024 7.56161 1.49024 7.64899C1.49024 11.793 1.48966 15.937 1.49024 20.0811C1.49044 21.5411 2.69021 22.7401 4.14708 22.7401C9.03517 22.7401 13.9233 22.7401 18.8114 22.7407C18.9676 22.7407 19.1222 22.7282 19.2765 22.7041C20.5386 22.509 21.5105 21.3754 21.5108 20.0934C21.5116 15.9527 21.5112 11.8118 21.511 7.67107C21.511 7.49936 21.5251 7.51811 21.3607 7.51811C18.0759 7.51772 14.7913 7.51792 11.5066 7.51792ZM11.5 6.0249C14.7456 6.0249 17.9912 6.0249 21.2368 6.0249C21.2985 6.0249 21.3603 6.02158 21.4218 6.02588C21.4888 6.03057 21.5136 6.00596 21.5126 5.93739C21.5093 5.7356 21.5163 5.53361 21.5107 5.33202C21.482 4.28048 21.0058 3.49676 20.0986 2.97481C19.9437 2.88573 19.9414 2.89003 19.9395 3.06955C19.9356 3.46785 19.6253 3.79115 19.2299 3.80873C18.8332 3.82631 18.4956 3.53564 18.4582 3.13694C18.4462 3.00782 18.4501 2.87674 18.453 2.74684C18.4545 2.67769 18.4288 2.65835 18.3624 2.65894C18.0638 2.66187 17.7653 2.6603 17.4667 2.66011C17.1194 2.66011 16.7721 2.66226 16.4249 2.65835C16.3466 2.65757 16.3232 2.68296 16.3273 2.75876C16.3329 2.86268 16.3304 2.96699 16.3283 3.07111C16.3201 3.46473 16.025 3.77728 15.6347 3.80775C15.2533 3.83764 14.9166 3.5708 14.8498 3.18363C14.8247 3.03829 14.8398 2.8912 14.8395 2.74508C14.8395 2.68355 14.8247 2.65874 14.7584 2.65894C14.1028 2.66089 13.4473 2.66089 12.7917 2.65894C12.7241 2.65894 12.7095 2.68706 12.7114 2.74704C12.7147 2.85115 12.7128 2.95527 12.7122 3.05959C12.7102 3.47508 12.3914 3.80306 11.984 3.80892C11.5691 3.81518 11.2397 3.49755 11.2283 3.07814C11.2251 2.96758 11.2251 2.85682 11.2283 2.74606C11.2298 2.68531 11.2127 2.65854 11.1465 2.65874C10.4909 2.66069 9.83528 2.66069 9.17969 2.65874C9.11327 2.65874 9.09613 2.68511 9.09828 2.74586C9.10178 2.84666 9.09964 2.94765 9.09925 3.04865C9.09711 3.47879 8.78022 3.8056 8.36283 3.80873C7.947 3.81185 7.62193 3.48817 7.61258 3.06037C7.61025 2.95625 7.60869 2.85193 7.61336 2.74801C7.61628 2.67925 7.59155 2.65854 7.52377 2.65874C6.87461 2.66069 6.22545 2.66089 5.57648 2.65874C5.50539 2.65854 5.48805 2.68589 5.48961 2.75094C5.49234 2.86795 5.49253 2.98535 5.48669 3.10237C5.46682 3.49325 5.1511 3.80131 4.76585 3.80892C4.36872 3.81693 4.04307 3.52997 4.00665 3.13401C3.99555 3.01446 3.99379 2.89315 3.99944 2.77321C4.00353 2.68687 3.98191 2.66558 3.89271 2.67202C2.7613 2.7529 1.72883 3.70442 1.53231 4.84542C1.4733 5.18883 1.49648 5.53342 1.49102 5.87781C1.48849 6.04229 1.47778 6.02471 1.6369 6.02471C4.92478 6.0249 8.21247 6.02471 11.5003 6.02471L11.5 6.0249Z" fill="white"/>
                    <path d="M16.3269 12.1305C16.0121 12.1305 15.6974 12.1283 15.3827 12.132C15.3092 12.1328 15.2892 12.1098 15.2896 12.0377C15.2921 11.3999 15.2921 10.7621 15.2896 10.1243C15.2892 10.051 15.311 10.0301 15.3834 10.0305C16.0194 10.0331 16.6553 10.0333 17.2912 10.0305C17.365 10.0301 17.3849 10.0528 17.3847 10.1249C17.3823 10.7627 17.3823 11.4005 17.3847 12.0383C17.3849 12.1113 17.3631 12.1328 17.2904 12.132C16.9692 12.1285 16.6481 12.1305 16.3267 12.1305H16.3269Z" fill="white"/>
                    <path d="M16.3364 14.2702C16.6543 14.2702 16.9724 14.2719 17.2902 14.2688C17.3619 14.268 17.3849 14.2891 17.3847 14.3628C17.3821 15.0006 17.3821 15.6382 17.3847 16.276C17.3849 16.3479 17.3648 16.3709 17.2912 16.3707C16.6553 16.368 16.0195 16.3682 15.3836 16.3707C15.3114 16.3709 15.2892 16.3506 15.2896 16.2771C15.2921 15.6394 15.2921 15.0017 15.2896 14.364C15.2894 14.2919 15.309 14.2682 15.3827 14.269C15.7005 14.2727 16.0186 14.2706 16.3364 14.2706V14.2702Z" fill="white"/>
                    <path d="M16.3368 20.607C16.0189 20.607 15.7009 20.6051 15.383 20.6086C15.3105 20.6094 15.2889 20.5883 15.2893 20.5148C15.292 19.877 15.2918 19.2392 15.2893 18.6016C15.2891 18.5292 15.31 18.5069 15.3828 18.5071C16.0187 18.5096 16.6546 18.5094 17.2904 18.5071C17.3628 18.5069 17.3844 18.5282 17.3842 18.601C17.3817 19.2388 17.3819 19.8766 17.3842 20.5142C17.3844 20.5867 17.3632 20.6094 17.2904 20.6086C16.9725 20.6051 16.6544 20.607 16.3366 20.607H16.3368Z" fill="white"/>
                    <path d="M5.62216 11.0805C5.62216 10.7615 5.6245 10.4423 5.62041 10.1233C5.61944 10.0491 5.64222 10.0305 5.71409 10.0309C6.34709 10.0335 6.98009 10.0336 7.61289 10.0305C7.69157 10.0301 7.70891 10.0555 7.70871 10.13C7.70599 10.7648 7.70579 11.3997 7.70891 12.0344C7.7093 12.1125 7.68651 12.1324 7.61094 12.132C6.98126 12.1293 6.35157 12.1289 5.72188 12.1322C5.63872 12.1326 5.61924 12.1068 5.62041 12.0275C5.62469 11.7118 5.62216 11.396 5.62216 11.0801V11.0805Z" fill="white"/>
                    <path d="M7.70738 15.3206C7.70738 15.6396 7.70504 15.9588 7.70913 16.2778C7.7101 16.3518 7.6881 16.371 7.61623 16.3706C6.98011 16.3681 6.34381 16.3681 5.70769 16.3706C5.63797 16.3708 5.62102 16.3472 5.62122 16.2809C5.62336 15.6396 5.62355 14.9983 5.62122 14.357C5.62102 14.288 5.64284 14.2691 5.70984 14.2693C6.34926 14.2714 6.98868 14.2712 7.62811 14.2693C7.69336 14.2691 7.70933 14.2916 7.70894 14.3539C7.70621 14.6762 7.70757 14.9985 7.70757 15.3208L7.70738 15.3206Z" fill="white"/>
                    <path d="M7.70731 19.5695C7.70731 19.8853 7.70477 20.201 7.70906 20.5169C7.71003 20.5921 7.68588 20.6089 7.61518 20.6085C6.98218 20.606 6.34919 20.6054 5.71619 20.6089C5.63536 20.6093 5.62056 20.581 5.62076 20.5083C5.62309 19.8734 5.62348 19.2386 5.62037 18.6037C5.61998 18.5246 5.6453 18.5066 5.7197 18.507C6.34938 18.5097 6.97926 18.5103 7.60895 18.5066C7.69445 18.506 7.70984 18.5351 7.70886 18.6125C7.70497 18.9315 7.70711 19.2507 7.70731 19.5697V19.5695Z" fill="white"/>
                    <path d="M10.4544 19.566C10.4544 19.247 10.4561 18.9278 10.453 18.6088C10.4522 18.5365 10.4672 18.5064 10.5485 18.5068C11.1815 18.5102 11.8145 18.51 12.4473 18.5068C12.5257 18.5064 12.5454 18.5322 12.545 18.6072C12.5427 19.2421 12.5423 19.877 12.5454 20.5117C12.5458 20.5923 12.5172 20.6087 12.4436 20.6085C11.8139 20.6062 11.1842 20.6056 10.5545 20.6089C10.4713 20.6093 10.4513 20.5826 10.4524 20.5034C10.4565 20.1909 10.4542 19.8783 10.4542 19.5658L10.4544 19.566Z" fill="white"/>
                    <path d="M12.5441 11.0879C12.5441 11.3972 12.5416 11.7066 12.5459 12.0158C12.547 12.1008 12.5297 12.1338 12.4348 12.133C11.8085 12.1285 11.1819 12.1291 10.5555 12.1324C10.4731 12.1328 10.4525 12.1076 10.4529 12.0277C10.4558 11.3962 10.456 10.7646 10.4529 10.1331C10.4525 10.0501 10.4784 10.0303 10.5581 10.0307C11.1844 10.0338 11.811 10.034 12.4374 10.0305C12.5242 10.0299 12.5472 10.0557 12.5461 10.1407C12.5414 10.4564 12.5441 10.7722 12.5441 11.0881V11.0879Z" fill="white"/>
                    <path d="M12.5441 15.3246C12.5441 15.6403 12.5416 15.9562 12.5459 16.2719C12.5468 16.3506 12.5215 16.3705 12.4459 16.3703C11.813 16.3678 11.1802 16.3678 10.5472 16.3703C10.4751 16.3705 10.4527 16.3502 10.4529 16.2767C10.4554 15.6387 10.4556 15.0006 10.4529 14.3626C10.4525 14.2885 10.4757 14.2684 10.5472 14.2688C11.1802 14.2711 11.813 14.2713 12.4459 14.2688C12.5221 14.2684 12.5466 14.2903 12.5459 14.3676C12.5422 14.6866 12.5443 15.0056 12.5443 15.3246H12.5441Z" fill="white"/>
                    </svg>
                    
                <!-- <img src="https://www.shalomworld.ca/hubfs/US%20Election%20Prayer%20Page%20Assets/Prayer%20Board/cal.svg"  alt="Calendar Icon"> -->
                Add to Calendar
                  <!-- <span>Add to Calendar</span> -->

            </button>
           
        </div>
        

        <div class="label-time-container">
            <div class="label-time-slot">12 am - 12 pm</div>
            <div class="label-time-slot">12 am - 12 pm</div>
        </div>

        <div class="button-container">
            <div>
                <a>
                    <ul class="button tab-button active" id="btn_1" onclick="openTab(this, 'tab1')" >
                        <li>12 am</li>
                        <li>6 am</li>
                    </ul>
                </a >
            </div>
            <div >
                <a>
                    <ul class="button tab-button" id="btn_2" onclick="openTab(this, 'tab2')">
                        <li>6 am</li>
                        <li>12 pm</li>
                    </ul>
                </a >
            </div>
            <div>
                <a>
                    <ul class="button tab-button" id="btn_3" onclick="openTab(this, 'tab3')">
                        <li>12 pm</li>
                        <li>6 pm</li>
                    </ul>
                </a >
            </div>
            <div>
                <a>
                    <ul class="button tab-button" id="btn_4" onclick="openTab(this, 'tab4')">
                        <li>6 pm</li>
                        <li>12 am</li>
                    </ul>
                </a >
            </div>

        </div>

        

        <!-- <div class="time-slots">
            <button class="time-slot" onclick="showSchedule('12am-6am')">12 am</button>
            <button class="time-slot" onclick="showSchedule('6am-12pm')">06 am</button>
            <button class="time-slot" onclick="showSchedule('12pm-6pm')">12 pm</button>
            <button class="time-slot" onclick="showSchedule('6pm-12am')">06 pm</button>
        </div> -->

    

        <div class="table-body">
            <div class="schedule" id="schedule">
                <!-- Schedule items will be inserted here -->
                 <div id="tab1" class="tab-content" style="display: block;" >
                    {% for item in module.tab_1 %}
                    <div id=1_{{loop.index}} class = 'schedule-item'>
                        <div class = 'schedule-time'>{{ item.start_time }} <span class="time_hyphen">-</span>  {{ item.end_time }}</div>
                        <div>
                            <div class= 'schedule-names'>{{ item.resource_name }}</div>
                            <div class= 'schedule-description'>{{ item.resource_description }}</div >  
                        </div>
                        <div class = 'schedule-images'>
                            {% if item.resource_image.src %}
                            <Image src="{{ item.resource_image.src|escape_url }}">
                            {% endif %}
                            </Image>
    
                        </div>
    
                    </div>
                    {% endfor %}

                 </div>


                <div id="tab2" class="tab-content" style="display: none;">
                    {% for item in module.tab_2 %}
                    <div id=2_{{loop.index}} class = 'schedule-item'>
    
                        <div class = 'schedule-time'>{{ item.start_time }} - {{ item.end_time }}</div>
                        <div>
                            <div class= 'schedule-names'>{{ item.resource_name }}</div>
                            <div class= 'schedule-description'>{{ item.resource_description }}</div >  
                        </div>
                        <div class = 'schedule-images'>
                            {% if item.resource_image.src %}
                            <Image src="{{ item.resource_image.src|escape_url }}">
                            {% endif %}
                            </Image>
    
                        </div>
    
                    </div>
                    {% endfor %}

                </div>

                <div id="tab3" class="tab-content" style="display: none;">
                    {% for item in module.tab_3 %}
                    <div id=3_{{loop.index}} class = 'schedule-item'>
    
                        <div class = 'schedule-time'>{{ item.start_time }} - {{ item.end_time }}</div>
                        <div>
                            <div class= 'schedule-names'>{{ item.resource_name }}</div>
                            <div class= 'schedule-description'>{{ item.resource_description }}</div >  
                        </div>
                        <div class = 'schedule-images'>
                            {% if item.resource_image.src %}
                            <Image src="{{ item.resource_image.src|escape_url }}">
                                {% endif %}
                            </Image>
    
                        </div>
    
                    </div>
                    {% endfor %}

                </div>
                <div id="tab4" class="tab-content" style="display: none;">
                    {% for item in module.tab_4 %}
                    <div id=4_{{loop.index}} class = 'schedule-item'>
    
                        <div class = 'schedule-time'>{{ item.start_time }} - {{ item.end_time }}</div>
                        <div>
                            <div class= 'schedule-names'>{{ item.resource_name }}</div>
                            <div class= 'schedule-description'>{{ item.resource_description }}</div >  
                        </div>
                        <div class = 'schedule-images'>
                            {% if item.resource_image.src %}
                            <Image src="{{ item.resource_image.src|escape_url }}">
                            {% endif %}
                            </Image>
    
                        </div>
    
                    </div>
                    {% endfor %}

                </div>
                
            </div>

        </div>
        
    </div>

</div>


{%require_js%}
    <script async>

        
    function openTab(button, tabName) {
        // Hide all tab content
        
        var tabcontent = document.getElementsByClassName("tab-content");
        for (var i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
            // const time=document.getElementsByClassName("schedule-time")[i].innerText.split(" ")
            // console.log("Time ",time);
            
           
            
        }
           
            console.log("insise");
            
        // Remove the active class from all buttons
        var tabbuttons = document.getElementsByClassName("tab-button");
        for (var i = 0; i < tabbuttons.length; i++) {
            tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            
        }

        // Show the current tab and add an "active" class to the clicked button
        document.getElementById(tabName).style.display = "block";
        button.className += " active";


        

        // const currentTime = new Date();
        // const startTime = myData.start_time_value;
        // const endTime = myData.end_time_value;

        // if (currentTime >= startTime && currentTime <= endTime) {
        //     scheduleItem.style.backgroundColor = '#EDCEA1';
        //     scheduleItem.classList.add('shine-box');
        // }
        highlightCurrentSchedules();
    }

    var tab1 = {{ tab1_data|tojson}};
    var tab2 = {{ tab2_data|tojson}};
    var tab3 = {{ tab3_data|tojson}};
    var tab4 = {{ tab4_data|tojson}};

    function highlightCurrentSchedules() {
        console.log("comparison");
        
        const currentTime = new Date();
        const allTabs = [tab1, tab2, tab3, tab4];
        
        allTabs.map((tab, tabIndex)=>{

            tab.map((scheduleItem, index)=>{
                // console.log(tabIndex,index,scheduleItem ,"tab");

                const currentTime_f = new Date();
                const startTime_f = new Date(scheduleItem?.start_time_value);
                const endTime_f =  new Date(scheduleItem?.end_time_value);
                const options = {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    timeZone: 'America/New_York', // Set to US Eastern Time
                    hour12: false // Use 12-hour format
                };

                const formatter = new Intl.DateTimeFormat('en-US', options);

                const startTime =  formatter.format(startTime_f);
                const endTime =  formatter.format(endTime_f);
                const currentTime=formatter.format(currentTime_f);
                // console.log("start time: ", tabIndex,index, "s",startTime, "c",currentTime, "e",endTime);

                // console.log(`${tabIndex+1}_${index+1}`);
                // console.log(currentTime >= startTime);
                
                if (currentTime >= startTime && currentTime <= endTime) {
                    // console.log(`${tabIndex+1}_${index+1}`);
                    
                    let scheduleItemElement = document.getElementById(`${tabIndex+1}_${index+1}`);
                    // console.log("scheduleItemElement",scheduleItemElement);
                    
                    if (scheduleItemElement) {
                        scheduleItemElement.style.backgroundColor = '#EDCEA1'; 
                        scheduleItemElement.classList.add('shine-box'); 
                    }
                }

            })
            
        })
        
        // allTabs.forEach((tab, tabIndex) => {
        //     console.log(tab,"tab");
        //     console.log(tabIndex, "tabindex");
            
            
        //     tab.forEach((scheduleItem, index) => {

        //         console.log(scheduleItem,"scheduleItem");
                

                

                

                // console.log("scheduleItem.start_time_value", startTime);
                // console.log("scheduleItem.end_time_value", endTime);
                // console.log("currentTime", currentTime);
                

                // // Check if the current time is within the start and end times
                // if (currentTime >= startTime && currentTime <= endTime) {

                //     const scheduleItemElementnew = document.getElementById(`${tabIndex}_${scheduleItem.id}`);
                //     console.log("P\n\n scheduleItemElementnew*****",scheduleItemElementnew);
                    
                //     const scheduleItemElement = document.getElementById(`${tabIndex+1}_${index+1}`);
                //     console.log("scheduleItemElement",scheduleItemElement);
                    
                //     if (scheduleItemElement) {
                //         scheduleItemElement.style.backgroundColor = '#EDCEA1'; 
                //         scheduleItemElement.classList.add('shine-box'); 
                //     }
                // }
        //     });
        // });
    }

    
    highlightCurrentSchedules();

    </script>
{%end_require_js%}